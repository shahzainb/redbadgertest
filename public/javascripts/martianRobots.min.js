var MartianRobots=function(a){this.inputData=a;this.output=null;this.circle=null;this.isLost=false;this.angle=0;this.scents=[]};MartianRobots.prototype.begin=function(b){var a=document.getElementById(b);a.style.width=String(this.inputData.x)+"px";a.style.height=String(this.inputData.y)+"px";paper.setup(a);paper.view.draw();this.drawGrid()};MartianRobots.prototype.drawGrid=function(){var m=this.inputData.x/100;var h=this.inputData.y/100;var d=paper.view.bounds;var c=d.width/m;var j=d.height/h;for(var g=0;g<=m;g++){var b=d.left+g*c;var e=new paper.Point(b,d.top);var l=new paper.Point(b,d.bottom);var n=new paper.Path.Line(e,l);n.strokeColor="black"}for(var g=0;g<=h;g++){var k=d.top+g*j;var a=new paper.Point(d.left,k);var f=new paper.Point(d.right,k);var n=new paper.Path.Line(a,f);n.strokeColor="black"}paper.view.update()};MartianRobots.prototype.drawRobot=function(){if(this.circle){this.circle.remove();this.isLost=false}var b=this.inputData.robotStartingPosition.x;var a=paper.view.bounds.height-this.inputData.robotStartingPosition.y;this.circle=new paper.Path.Circle(b,a,4);this.circle.fillColor="red";paper.view.update();this.angle=this.getAngle()};MartianRobots.prototype.runInstructions=function(a,b){this.output=b;for(var c=0;c<a.length;c++){this.normalizeAngle();switch(a.charAt(c)){case"L":this.angle-=90;break;case"R":this.angle+=90;break;case"F":this.moveRobot();break;default:break}}this.writeOutput()};MartianRobots.prototype.writeOutput=function(){var c=String(this.circle.position.x/100);var a=String((this.inputData.y-this.circle.position.y)/100);var b="\n"+c+" "+a+" "+this.getOrientation();this.output.value+=b;if(this.isLost){this.output.value+=" LOST"}};MartianRobots.prototype.moveRobot=function(){var b=0;var a=0;switch(this.angle){case 90:case -270:a=100;break;case -90:case 270:a=-100;break;case 180:case -180:b=-100;break;case 0:case 360:b=100;break;default:break}if(this.isOutsideGrid(b,a)){return}else{this.circle.position.x+=b;this.circle.position.y+=a;paper.view.update()}};MartianRobots.prototype.getOrientation=function(){var a="";this.normalizeAngle();switch(this.angle){case 90:case -270:a="S";break;case -90:case 270:a="N";break;case 180:case -180:a="W";break;case 0:case 360:a="E";break;default:break}return a};MartianRobots.prototype.isOutsideGrid=function(b,a){var c=this.getRobotCoordinates();var e=[0,0];e[0]=c[0]+b;e[1]=c[1]-a;e=e.map(String);e=e.join(",");if(c[0]<0||c[1]<0||c[0]>this.inputData.x||c[1]>this.inputData.y){var d=String(c[0])+","+String(c[1]);this.isLost=true;this.scents.push(d)}if(this.scents.indexOf(e)>-1){return true}return false};MartianRobots.prototype.normalizeAngle=function(){(this.angle%=360)>=0?this.angle:(this.angle+360)};MartianRobots.prototype.getRobotCoordinates=function(){var c=[0,0];var b=this.circle.position.x;c[0]=b;var a=this.inputData.y-this.circle.position.y;c[1]=a;return c};MartianRobots.prototype.getAngle=function(){var a=0;switch(this.inputData.robotStartingPosition.orientation){case"N":a=-90;break;case"S":a=90;break;case"E":a=0;break;case"W":a=180;break;default:a=0;break}return a};